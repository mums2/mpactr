<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Mispicked ions filter — filter_mispicked_ions • mpactR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Mispicked ions filter — filter_mispicked_ions"><meta name="description" content="filter_mispicked_ions() identifies ions that were incorrectly split into
separate features during preprocessing. This filter checks the feature table
for similar ions in terms of mass and retention time. Peaks found to be
similar are merged into a single feature given merge_peaks is TRUE.
The parameter ringwin is the detector saturation mass window, specific for
some instruments, such as Waters Synapse G2-Si-Q-ToF, to account for high
concentration samples.
Parameter isowin is the isotopic mass window, which accounts for isotopic
peaks of the same precussor mass that were incorrectly assigned during
preprocessing.
copy_object: mpactR is built on an R6 class-system, meaning it operates on
reference semantics in which data is updated in-place. Compared to a
shallow copy, where only data pointers are copied, or a deep copy, where
the entire data object is copied in memory, any changes to the original
data object, regardless if they are assigned to a new object, result in
changes to the original data object. We recommend using the default
copy_object = FALSE as this makes for an extremely fast and
memory-efficient way to chain mpactR filters together; however, if you
would like to run the filters individually with traditional R style objects,
you can set copy_object to TRUE as shown in the filter examples."><meta property="og:description" content="filter_mispicked_ions() identifies ions that were incorrectly split into
separate features during preprocessing. This filter checks the feature table
for similar ions in terms of mass and retention time. Peaks found to be
similar are merged into a single feature given merge_peaks is TRUE.
The parameter ringwin is the detector saturation mass window, specific for
some instruments, such as Waters Synapse G2-Si-Q-ToF, to account for high
concentration samples.
Parameter isowin is the isotopic mass window, which accounts for isotopic
peaks of the same precussor mass that were incorrectly assigned during
preprocessing.
copy_object: mpactR is built on an R6 class-system, meaning it operates on
reference semantics in which data is updated in-place. Compared to a
shallow copy, where only data pointers are copied, or a deep copy, where
the entire data object is copied in memory, any changes to the original
data object, regardless if they are assigned to a new object, result in
changes to the original data object. We recommend using the default
copy_object = FALSE as this makes for an extremely fast and
memory-efficient way to chain mpactR filters together; however, if you
would like to run the filters individually with traditional R style objects,
you can set copy_object to TRUE as shown in the filter examples."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mpactR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/reference_semantics.html">Reference Semantics</a></li>
    <li><a class="dropdown-item" href="../articles/filter2.html">Filter</a></li>
    <li><a class="dropdown-item" href="../articles/downstream_analyses.html">Additional Analyses</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/SchlossLab/mpactR"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Mispicked ions filter</h1>
      <small class="dont-index">Source: <a href="https://github.com/SchlossLab/mpactR/blob/main/R/filters.R" class="external-link"><code>R/filters.R</code></a></small>
      <div class="d-none name"><code>filter_mispicked_ions.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>filter_mispicked_ions()</code> identifies ions that were incorrectly split into
separate features during preprocessing. This filter checks the feature table
for similar ions in terms of mass and retention time. Peaks found to be
similar are merged into a single feature given <code>merge_peaks</code> is <code>TRUE</code>.</p>
<p>The parameter <code>ringwin</code> is the detector saturation mass window, specific for
some instruments, such as Waters Synapse G2-Si-Q-ToF, to account for high
concentration samples.</p>
<p>Parameter <code>isowin</code> is the isotopic mass window, which accounts for isotopic
peaks of the same precussor mass that were incorrectly assigned during
preprocessing.</p>
<p><code>copy_object</code>: mpactR is built on an R6 class-system, meaning it operates on
reference semantics in which data is updated <em>in-place</em>. Compared to a
shallow copy, where only data pointers are copied, or a deep copy, where
the entire data object is copied in memory, any changes to the original
data object, regardless if they are assigned to a new object, result in
changes to the original data object. We recommend using the default
<code>copy_object = FALSE</code> as this makes for an extremely fast and
memory-efficient way to chain mpactR filters together; however, if you
would like to run the filters individually with traditional R style objects,
you can set <code>copy_object</code> to <code>TRUE</code> as shown in the filter examples.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">filter_mispicked_ions</span><span class="op">(</span></span>
<span>  <span class="va">mpactr_object</span>,</span>
<span>  ringwin <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  isowin <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  trwin <span class="op">=</span> <span class="fl">0.005</span>,</span>
<span>  max_iso_shift <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  merge_peaks <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  merge_method <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>  copy_object <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mpactr-object">mpactr_object<a class="anchor" aria-label="anchor" href="#arg-mpactr-object"></a></dt>
<dd><p>An <code>mpactr_object</code>. See <code><a href="import_data.html">import_data()</a></code>.</p></dd>


<dt id="arg-ringwin">ringwin<a class="anchor" aria-label="anchor" href="#arg-ringwin"></a></dt>
<dd><p>Ringing mass window or detector saturation mass window.
Default = 0.5 atomic mass units (AMU).</p></dd>


<dt id="arg-isowin">isowin<a class="anchor" aria-label="anchor" href="#arg-isowin"></a></dt>
<dd><p>Isotopic mass window. Default = 0.01 AMU.</p></dd>


<dt id="arg-trwin">trwin<a class="anchor" aria-label="anchor" href="#arg-trwin"></a></dt>
<dd><p>A <code>numeric</code> denoting the retention time threshold for assessing
if ions should be merged. Default = 0.005.</p></dd>


<dt id="arg-max-iso-shift">max_iso_shift<a class="anchor" aria-label="anchor" href="#arg-max-iso-shift"></a></dt>
<dd><p>A <code>numeric</code>. Default = 3.</p></dd>


<dt id="arg-merge-peaks">merge_peaks<a class="anchor" aria-label="anchor" href="#arg-merge-peaks"></a></dt>
<dd><p>A <code>boolean</code> parameter to determine if peaks found to
belong to the same ion should be merged in the feature table.</p></dd>


<dt id="arg-merge-method">merge_method<a class="anchor" aria-label="anchor" href="#arg-merge-method"></a></dt>
<dd><p>If merge_peaks is TRUE, a method for how similar peaks
should be merged. Can be one of "sum".</p></dd>


<dt id="arg-copy-object">copy_object<a class="anchor" aria-label="anchor" href="#arg-copy-object"></a></dt>
<dd><p>A <code>boolean</code> parameter that allows users to return a copied
object instead of modifying the object.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>an <code>mpactr_object</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="import_data.html">import_data</a></span><span class="op">(</span><span class="fu"><a href="example.html">example</a></span><span class="op">(</span><span class="st">"coculture_peak_table.csv"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="example.html">example</a></span><span class="op">(</span><span class="st">"metadata.csv"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  format <span class="op">=</span> <span class="st">"Progenesis"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data_filter</span> <span class="op">&lt;-</span> <span class="fu">filter_mispicked_ions</span><span class="op">(</span><span class="va">data</span>,</span></span>
<span class="r-in"><span>  ringwin <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>  isowin <span class="op">=</span> <span class="fl">0.01</span>,</span></span>
<span class="r-in"><span>  trwin <span class="op">=</span> <span class="fl">0.005</span>,</span></span>
<span class="r-in"><span>  max_iso_shift <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  merge_peaks <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  merge_method <span class="op">=</span> <span class="st">"sum"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Checking 1303 peaks for mispicked peaks.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Argument merge_peaks is: TRUE. Merging mispicked peaks with method sum.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> 70 ions failed the mispicked filter, 1233 ions remain.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Allison Mason, Gregory Johnson, Patrick Schloss.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

